---
- name: Install development software
  become: true
  apt:
    name:
      - vim
      - git
      - zsh
      - fonts-powerline
      - yadm
      - python3-pip

- name: Generate SSH key pair
  openssh_keypair:
    path: "{{ home }}/.ssh/id_ed25519"
    type: ed25519
  register: ssh_id

- name: Prompt to register SSH key
  pause:
    prompt: "A new SSH key was created, register it where desired:\n\t{{ ssh_id.public_key }}\nAny key to continue"
  when: ssh_id.changed

- name: Check if VS code is installed
  command: dpkg-query -W code
  register: check_code
  failed_when: false
  changed_when: false

- name: Install VS code
  become: true
  apt:
    deb: https://code.visualstudio.com/sha/download?build=stable&os=linux-deb-x64
  when: check_code.rc == 1
